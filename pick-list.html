<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ“¦ åŸ·è²¨æ¸…å–®</title>
<style>
  body { font-family: -apple-system, sans-serif; background: #f1f5f9; margin: 0; padding: 15px; }
  .region-section { background: #fff; border-radius: 12px; padding: 15px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
  .region-title { font-size: 18px; font-weight: bold; color: #1e40af; border-bottom: 2px solid #bfdbfe; padding-bottom: 10px; margin-bottom: 15px; display: flex; justify-content: space-between; }
  
  /* å¤§ç´…æ¡†: å®¢äººåˆ†çµ„ */
  .cust-card { border: 2px solid #ef4444; border-radius: 10px; padding: 12px; margin-bottom: 15px; background: #fff; }
  .cust-name { font-weight: bold; font-size: 16px; color: #b91c1c; margin-bottom: 10px; display: block; }
  
  /* ç´°é»ƒæ¡†: å•†å“ç·¨è™Ÿ */
  .code-wrap { display: flex; flex-wrap: wrap; gap: 8px; }
  .code-box { border: 1px solid #f59e0b; background: #fef3c7; color: #92400e; padding: 5px 12px; border-radius: 6px; font-weight: bold; font-size: 14px; }
  
  .weight-tag { background: #dcfce7; color: #166534; padding: 2px 8px; border-radius: 4px; font-size: 13px; }
</style>
</head>
<body>

<div id="content">è¼‰å…¥ä¸­...</div>

<script>
const API = 'ä½ çš„_GAS_API_URL'; // é€™è£¡å¡«å…¥ä½ çš„ GAS ç¶²å€
const password = '4916';

function loadData() {
  fetch(API, {
    method: 'POST',
    body: new URLSearchParams({ action: 'getPickListData', password: password })
  })
  .then(r => r.json())
  .then(data => {
    if (!data.allGroups) return;
    render(data);
  });
}

function render(data) {
  const container = document.getElementById('content');
  container.innerHTML = '';
  
  const groupName = data.latestGroup;
  const groupData = data.allGroups[groupName];

  if (!groupData) {
    container.innerHTML = `<h2>æ‰¾ä¸åˆ° ${groupName} çš„è³‡æ–™</h2>`;
    return;
  }

  // æ¸²æŸ“ é¦™æ¸¯åœ˜ èˆ‡ å°ç£åœ˜
  ['HK', 'TW'].forEach(region => {
    const info = groupData[region];
    const regionName = region === 'HK' ? 'ğŸ‡­ğŸ‡° é¦™æ¸¯åœ˜' : 'ğŸ‡¹ğŸ‡¼ å°ç£åœ˜';
    
    let html = `
      <div class="region-section">
        <div class="region-title">
          <span>${regionName} - ${groupName}</span>
          <span class="weight-tag">ç¸½é‡: ${info.totalWeight.toFixed(2)}kg</span>
        </div>
    `;

    // éæ­·å®¢äºº
    for (const custId in info.customers) {
      const codes = info.customers[custId];
      html += `
        <div class="cust-card">
          <div class="cust-name">ğŸ‘¤ ${custId}</div>
          <div class="code-wrap">
            ${codes.map(c => `<div class="code-box"># ${c}</div>`).join('')}
          </div>
        </div>
      `;
    }

    html += `</div>`;
    container.innerHTML += html;
  });
}

loadData();
</script>
</body>
</html>
